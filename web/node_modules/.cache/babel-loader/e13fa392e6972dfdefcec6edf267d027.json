{"ast":null,"code":"var _jsxFileName = \"/home/brunoschneider/Documents/happy-project-nwl3/web/src/pages/CreateOrphanage.tsx\";\nimport React, { useState } from \"react\";\nimport { Map, Marker, TileLayer } from 'react-leaflet';\nimport { FiPlus } from \"react-icons/fi\";\nimport Sidebar from \"../components/Sidebar\";\nimport '../styles/pages/create-orphanage.css';\nimport mapIcon from \"../utils/mapIcon\";\nimport api from \"../services/api\";\nimport { useHistory } from \"react-router-dom\";\nexport default function CreateOrphanage() {\n  const history = useHistory();\n  const [position, setPosition] = useState({\n    latitude: 0,\n    longitude: 0\n  });\n\n  function handleSelectImages(event) {\n    if (!event.target.files) {\n      return;\n    }\n\n    const selectedImages = Array.from(event.target.files);\n    setImages(selectedImages);\n    const selectedImagesPreview = selectedImages.map(image => {\n      return URL.createObjectURL(image);\n    });\n    setPreviewImages(selectedImagesPreview);\n  }\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n    const {\n      latitude,\n      longitude\n    } = position;\n    const data = new FormData();\n    data.append('name', name);\n    data.append('about', about);\n    data.append('latitude', String(latitude));\n    data.append('longitude', String(longitude));\n    data.append('instructions', instructions);\n    data.append('opening_hours', opening_hours);\n    data.append('open_on_weekends', String(open_on_weekends));\n    images.forEach(image => {\n      data.append('images', image);\n    });\n    await api.post('orphanages', data);\n    alert('Cadastro realizado com sucesso');\n    history.push('/app');\n    console.log({\n      position,\n      name,\n      about,\n      latitude,\n      longitude,\n      instructions,\n      opening_hours,\n      open_on_weekends,\n      images\n    });\n  }\n\n  const [name, setName] = useState(\"\");\n  const [about, setAbout] = useState('');\n  const [instructions, setInstructions] = useState('');\n  const [opening_hours, setOpeningHours] = useState('');\n  const [open_on_weekends, setOpenOnWeekends] = useState(true);\n  const [images, setImages] = useState([]);\n  const [previewImages, setPreviewImages] = useState([]);\n\n  function handleMapClick(event) {\n    const {\n      lat,\n      lng\n    } = event.latlng;\n    setPosition({\n      latitude: lat,\n      longitude: lng\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"page-create-orphanage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Sidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"create-orphanage-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"fieldset\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"legend\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, \"Dados\"), /*#__PURE__*/React.createElement(Map, {\n    center: [-27.2092052, -49.6401092],\n    style: {\n      width: '100%',\n      height: 280\n    },\n    zoom: 15,\n    onClick: handleMapClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TileLayer, {\n    url: `https://api.mapbox.com/styles/v1/mapbox/light-v10/tiles/256/{z}/{x}/{y}@2x?access_token=${process.env.REACT_APP_MAPBOX_TOKEN}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  }), position.latitude !== 0 && /*#__PURE__*/React.createElement(Marker, {\n    interactive: false,\n    icon: mapIcon,\n    position: [position.latitude, position.longitude],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 15\n    }\n  }, \"Nome\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"name\",\n    value: name,\n    onChange: event => setName(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"about\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 15\n    }\n  }, \"Sobre \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 44\n    }\n  }, \"M\\xE1ximo de 300 caracteres\")), /*#__PURE__*/React.createElement(\"textarea\", {\n    id: \"name\",\n    maxLength: 300,\n    value: about,\n    onChange: event => setAbout(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"images\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 15\n    }\n  }, \"Fotos\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"images-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 15\n    }\n  }, previewImages.map(image => {\n    return /*#__PURE__*/React.createElement(\"img\", {\n      key: image,\n      src: image,\n      alt: name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 21\n      }\n    });\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"image[]\",\n    className: \"new-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FiPlus, {\n    size: 24,\n    color: \"#15b6d6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"input\", {\n    multiple: true,\n    onChange: handleSelectImages,\n    type: \"file\",\n    id: \"image[]\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"fieldset\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"legend\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }\n  }, \"Visita\\xE7\\xE3o\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 15\n    }\n  }, \"Instru\\xE7\\xF5es\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    id: \"instructions\",\n    value: instructions,\n    onChange: event => setInstructions(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"opening_hours\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 15\n    }\n  }, \"Hor\\xE1rio de Funcionamento\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"opening_hours\",\n    value: opening_hours,\n    onChange: event => setOpeningHours(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"open_on_weekends\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 15\n    }\n  }, \"Atende fim de semana\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"button-select\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: open_on_weekends ? 'active' : '',\n    onClick: () => setOpenOnWeekends(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 17\n    }\n  }, \"Sim\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: !open_on_weekends ? 'active' : '',\n    onClick: () => setOpenOnWeekends(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 17\n    }\n  }, \"N\\xE3o\")))), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"confirm-button\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 11\n    }\n  }, \"Confirmar\"))));\n} // return `https://a.tile.openstreetmap.org/${z}/${x}/${y}.png`;","map":{"version":3,"sources":["/home/brunoschneider/Documents/happy-project-nwl3/web/src/pages/CreateOrphanage.tsx"],"names":["React","useState","Map","Marker","TileLayer","FiPlus","Sidebar","mapIcon","api","useHistory","CreateOrphanage","history","position","setPosition","latitude","longitude","handleSelectImages","event","target","files","selectedImages","Array","from","setImages","selectedImagesPreview","map","image","URL","createObjectURL","setPreviewImages","handleSubmit","preventDefault","data","FormData","append","name","about","String","instructions","opening_hours","open_on_weekends","images","forEach","post","alert","push","console","log","setName","setAbout","setInstructions","setOpeningHours","setOpenOnWeekends","previewImages","handleMapClick","lat","lng","latlng","width","height","process","env","REACT_APP_MAPBOX_TOKEN","value"],"mappings":"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","sourcesContent":["import React, { useState, FormEvent, ChangeEvent } from \"react\";\nimport { Map, Marker, TileLayer } from 'react-leaflet';\nimport { LeafletMouseEvent } from 'leaflet';\n\nimport { FiPlus } from \"react-icons/fi\";\n\nimport Sidebar from \"../components/Sidebar\";\n\nimport '../styles/pages/create-orphanage.css';\nimport mapIcon from \"../utils/mapIcon\";\nimport api from \"../services/api\";\nimport { useHistory } from \"react-router-dom\";\n\n\n\nexport default function CreateOrphanage() {\n\n  const history = useHistory();\n\n  const [position, setPosition] = useState({\n    latitude: 0,\n    longitude: 0\n  });\n\n  function handleSelectImages(event: ChangeEvent<HTMLInputElement>) {\n\n    if (!event.target.files) {\n      return;\n    }\n\n    const selectedImages = Array.from(event.target.files);\n\n    setImages(selectedImages);\n\n    const selectedImagesPreview = selectedImages.map(image => {\n      return URL.createObjectURL(image);\n    });\n\n    setPreviewImages(selectedImagesPreview);\n  }\n\n  async function handleSubmit(event: FormEvent) {\n    event.preventDefault();\n\n    const { latitude, longitude } = position;\n\n    const data = new FormData();\n\n    data.append('name', name);\n    data.append('about', about);\n    data.append('latitude', String(latitude));\n    data.append('longitude', String(longitude));\n    data.append('instructions', instructions);\n    data.append('opening_hours', opening_hours);\n    data.append('open_on_weekends', String(open_on_weekends));\n\n    images.forEach(image => {\n      data.append('images', image);\n    })\n\n    await api.post('orphanages', data);\n\n    alert('Cadastro realizado com sucesso');\n\n    history.push('/app');\n\n\n    console.log({\n      position,\n      name,\n      about,\n      latitude,\n      longitude,\n      instructions,\n      opening_hours,\n      open_on_weekends,\n      images\n    })\n\n  }\n\n\n  const [name, setName] = useState(\"\");\n  const [about, setAbout] = useState('');\n  const [instructions, setInstructions] = useState('');\n  const [opening_hours, setOpeningHours] = useState('');\n  const [open_on_weekends, setOpenOnWeekends] = useState(true);\n  const [images, setImages] = useState<File[]>([]);\n  const [previewImages, setPreviewImages] = useState<string[]>([]);\n\n\n  function handleMapClick(event: LeafletMouseEvent) {\n    const { lat, lng } = event.latlng;\n    setPosition({\n      latitude: lat,\n      longitude: lng,\n    });\n  }\n\n\n  return (\n    <div id=\"page-create-orphanage\">\n\n      <Sidebar></Sidebar>\n\n\n      <main>\n        <form onSubmit={handleSubmit} className=\"create-orphanage-form\">\n          <fieldset>\n            <legend>Dados</legend>\n\n            <Map\n              center={[-27.2092052, -49.6401092]}\n              style={{ width: '100%', height: 280 }}\n              zoom={15}\n              onClick={handleMapClick}\n            >\n              <TileLayer\n                url={`https://api.mapbox.com/styles/v1/mapbox/light-v10/tiles/256/{z}/{x}/{y}@2x?access_token=${process.env.REACT_APP_MAPBOX_TOKEN}`}\n              />\n\n              {position.latitude !== 0 && (\n                <Marker\n                  interactive={false}\n                  icon={mapIcon}\n                  position={[\n                    position.latitude,\n                    position.longitude\n                  ]}\n                />\n              )}\n\n            </Map>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"name\">Nome</label>\n              <input\n                id=\"name\"\n                value={name}\n                onChange={event => setName(event.target.value)}\n              />\n            </div>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"about\">Sobre <span>Máximo de 300 caracteres</span></label>\n              <textarea\n                id=\"name\"\n                maxLength={300}\n                value={about}\n                onChange={event => setAbout(event.target.value)}\n              />\n            </div>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"images\">Fotos</label>\n\n              <div className=\"images-container\">\n                {previewImages.map(image => {\n                  return (\n                    <img key={image} src={image} alt={name} />\n                  )\n                })}\n\n                <label htmlFor=\"image[]\" className=\"new-image\">\n                  <FiPlus size={24} color=\"#15b6d6\" />\n                </label>\n\n              </div>\n              <input multiple onChange={handleSelectImages} type=\"file\" id=\"image[]\" />\n            </div>\n          </fieldset>\n\n          <fieldset>\n            <legend>Visitação</legend>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"instructions\">Instruções</label>\n              <textarea\n                id=\"instructions\"\n                value={instructions}\n                onChange={event => setInstructions(event.target.value)}\n              />\n            </div>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"opening_hours\">Horário de Funcionamento</label>\n              <input\n                id=\"opening_hours\"\n                value={opening_hours}\n                onChange={event => setOpeningHours(event.target.value)}\n              />\n            </div>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"open_on_weekends\">Atende fim de semana</label>\n\n              <div className=\"button-select\">\n                <button\n                  type=\"button\"\n                  className={open_on_weekends ? 'active' : ''}\n                  onClick={() => setOpenOnWeekends(true)}\n                >\n                  Sim\n                  </button>\n                <button\n                  type=\"button\"\n                  className={!open_on_weekends ? 'active' : ''}\n                  onClick={() => setOpenOnWeekends(false)}\n                >\n                  Não\n                  </button>\n              </div>\n            </div>\n          </fieldset>\n\n          <button className=\"confirm-button\" type=\"submit\">\n            Confirmar\n          </button>\n        </form>\n      </main>\n    </div>\n  );\n}\n\n// return `https://a.tile.openstreetmap.org/${z}/${x}/${y}.png`;\n"]},"metadata":{},"sourceType":"module"}